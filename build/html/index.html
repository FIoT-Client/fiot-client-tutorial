

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>FIoT-Client’s installation and use Tutorial &mdash; fiotclient  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="fiotclient  documentation" href="#"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> fiotclient
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">FIoT-Client’s installation and use Tutorial</a><ul>
<li><a class="reference internal" href="#authors">Authors</a></li>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#theoretical-concepts">Theoretical Concepts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing-the-environment">Installing the environment</a><ul>
<li><a class="reference internal" href="#installing-the-backend-docker">Installing the backend: Docker</a></li>
<li><a class="reference internal" href="#installing-the-frontend-fiot-client-python">Installing the frontend : FIoT-Client-Python</a><ul>
<li><a class="reference internal" href="#virtual-environment-configuration">Virtual Environment Configuration</a></li>
<li><a class="reference internal" href="#installing-the-fiot-client-library">Installing the FIoT-Client library</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing-the-frontend-gui-web">Installing the frontend: GUI Web</a></li>
</ul>
</li>
<li><a class="reference internal" href="#registering-a-device">Registering a device</a><ul>
<li><a class="reference internal" href="#using-fiot-client">Using FIoT-Client</a><ul>
<li><a class="reference internal" href="#registering-the-device-on-fiware">Registering the device on Fiware</a><ul>
<li><a class="reference internal" href="#configure-the-configuration-file-config-ini">Configure the configuration file (config.ini)</a></li>
<li><a class="reference internal" href="#creation-of-the-service-and-the-service-path">Creation of the service and the Service Path</a></li>
<li><a class="reference internal" href="#registering-the-device">Registering the device</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-up-storage-registering-databases-in-the-orion">Setting up Storage (registering databases in the Orion)</a><ul>
<li><a class="reference internal" href="#entity-s-creation">Entity’s creation</a></li>
<li><a class="reference internal" href="#connecting-the-entity-with-cygnus">Connecting the entity with Cygnus</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#usando-o-web-gui">Usando o WEB GUI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#programming-a-device">Programming a device</a><ul>
<li><a class="reference internal" href="#arduino">Arduino</a></li>
<li><a class="reference internal" href="#raspberry-pi">Raspberry Pi</a></li>
</ul>
</li>
<li><a class="reference internal" href="#visualizing-the-generated-data">Visualizing the generated data</a><ul>
<li><a class="reference internal" href="#using-web-gui">Using Web Gui</a></li>
<li><a class="reference internal" href="#database-query">Database Query</a></li>
<li><a class="reference internal" href="#mysql">Mysql</a></li>
<li><a class="reference internal" href="#mongodb">MongoDB</a></li>
<li><a class="reference internal" href="#elk">ELK</a></li>
<li><a class="reference internal" href="#consulta-ao-orion">Consulta ao Orion</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">fiotclient</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>FIoT-Client’s installation and use Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fiot-client-s-installation-and-use-tutorial">
<h1>FIoT-Client’s installation and use Tutorial<a class="headerlink" href="#fiot-client-s-installation-and-use-tutorial" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#authors" id="id1">Authors</a></li>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a><ul>
<li><a class="reference internal" href="#theoretical-concepts" id="id3">Theoretical Concepts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing-the-environment" id="id4">Installing the environment</a><ul>
<li><a class="reference internal" href="#installing-the-backend-docker" id="id5">Installing the backend: Docker</a></li>
<li><a class="reference internal" href="#installing-the-frontend-fiot-client-python" id="id6">Installing the frontend : FIoT-Client-Python</a><ul>
<li><a class="reference internal" href="#virtual-environment-configuration" id="id7">Virtual Environment Configuration</a></li>
<li><a class="reference internal" href="#installing-the-fiot-client-library" id="id8">Installing the FIoT-Client library</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing-the-frontend-gui-web" id="id9">Installing the frontend: GUI Web</a></li>
</ul>
</li>
<li><a class="reference internal" href="#registering-a-device" id="id10">Registering a device</a><ul>
<li><a class="reference internal" href="#using-fiot-client" id="id11">Using FIoT-Client</a><ul>
<li><a class="reference internal" href="#registering-the-device-on-fiware" id="id12">Registering the device on Fiware</a></li>
<li><a class="reference internal" href="#setting-up-storage-registering-databases-in-the-orion" id="id13">Setting up Storage (registering databases in the Orion)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usando-o-web-gui" id="id14">Usando o WEB GUI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#programming-a-device" id="id15">Programming a device</a><ul>
<li><a class="reference internal" href="#arduino" id="id16">Arduino</a></li>
<li><a class="reference internal" href="#raspberry-pi" id="id17">Raspberry Pi</a></li>
</ul>
</li>
<li><a class="reference internal" href="#visualizing-the-generated-data" id="id18">Visualizing the generated data</a><ul>
<li><a class="reference internal" href="#using-web-gui" id="id19">Using Web Gui</a></li>
<li><a class="reference internal" href="#database-query" id="id20">Database Query</a></li>
<li><a class="reference internal" href="#mysql" id="id21">Mysql</a></li>
<li><a class="reference internal" href="#mongodb" id="id22">MongoDB</a></li>
<li><a class="reference internal" href="#elk" id="id23">ELK</a></li>
<li><a class="reference internal" href="#consulta-ao-orion" id="id24">Consulta ao Orion</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="authors">
<span id="autores"></span><h2><a class="toc-backref" href="#id1">Authors</a><a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h2>
<p>Authors:</p>
<ul class="simple">
<li><a class="reference external" href="https://projetos.imd.ufrn.br/kaduardo">Carlos Eduardo da Silva (Orientador)</a> -&gt; <a class="reference external" href="mailto:kaduardo&#37;&#52;&#48;imd&#46;ufrn&#46;br">Contato</a></li>
<li><a class="reference external" href="https://github.com/lucascriistiano">Lucas Cristiano Calixto Dantas</a> -&gt; <a class="reference external" href="mailto:lucascristiano27&#37;&#52;&#48;gmail&#46;com">Contato</a></li>
<li><a class="reference external" href="https://github.com/lucasramon">Lucas Ramon Bandeira da Silva</a> -&gt; <a class="reference external" href="mailto:lucas&#46;ramon&#46;jc&#37;&#52;&#48;gmail&#46;com">Contato</a></li>
</ul>
</div>
<div class="section" id="introduction">
<span id="introducao"></span><h2><a class="toc-backref" href="#id2">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<div class="section" id="theoretical-concepts">
<h3><a class="toc-backref" href="#id3">Theoretical Concepts</a><a class="headerlink" href="#theoretical-concepts" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://www.fiware.org">FIWARE</a> platform presents an enviroment based on the cloud computing platform <a class="reference external" href="https://www.openstack.org">OpenStack</a> with some changes and the addition of other components. It presents a set of standardized APIs that make the communication with the Internet of Things (IoT) and manipulating context information easier. It facilitates the analysis of big sets of data and the provision of real time average, making real time events analysis, information gathering from sensors, action on actuators easier.</p>
<p>that set of functionalities are grouped in the form of chapters, and each chapter is made by a set of GEs (generic enablers), being this the name of each component in the platform.</p>
<p>About the IoT applications, the platform offers GES that allows that “things” become context resources that are available, searchable, accessible and usable, making possible the interaction of Fiware Apps with real world objects. The “things” can represent any phisical object, living being, person or concept of interest from the perspective of a application, and their parameters are totally or partially bound to sensors, actuators (or a combination of both of them).</p>
<p>Some important concepts that are important to know to use this tutorial are listed below.</p>
<p><strong>Device:</strong> Also Known as IoT end-node, they are a hardware, component or system entity. They are designated for measure or influence the properties of a thing, or a group of things. Sensors and actuators are examples of devices.</p>
<p><strong>IoT End-Node:</strong> this term is used in the documentation for complex phisical devices with many sensors and actuators, like an Arduino based system, for example. Devices can use standardized or proprietary communication protocols, that can be natively send for the backend GEs or translated in other standardized or proprietary protocol in the IoT gateways, like the conversion of that specific protocol for the OMA NGSI, that can be made in the FIWARE GEs, for example. An Arduino or Raspberry pi are examples of IoT End-Nodes.</p>
<p><strong>IoT Resource:</strong> The tern refers to a computational element that provides acess to sensors/actuators devices. An information model for the description of IoT resources can include context information like precision, localization, status information, etc. IoT resource data level consists not only in the measured data itself, but also context information, like the type of data, a time instant, etc. IoT resoruces can be addressed using an uniform addressing scheme and they are usually hosted in the device but also presentes a logical representation in the backend.</p>
<p><strong>Thing:</strong> this term can refer to any object, person or place in the real world. they are represented as virtual things and each representation has an entity ID, one typer and diverses attributes. Sensors can be modeled as virtual things, but things in the real world, either concrete or abstract also can be modeled as virtual things. Data at level of things consists of things description and their attributes, it may also be informations about how the data was obtained through metadata.</p>
<p><strong>NGSI Context-Entity:</strong> IoT End-Nodes, IoT resources and “things” are represented as NGSI context entities in the GE data chapter context broeker, therefore developers need to learn just the same API of that GE, used for context information, as well to manage information of IoT applications. The informations of measures of sensors can be obtained through reading of the attributes of these entities.</p>
<p><strong>Service and Service-Path:</strong> They are used to defne the utilized scope for the execution of requests and opertations, making the required operations are perfomed over devices and entities with given unique inside a specific scope, located together with the values of the Service and Service-path defined at the moment of the register of a device and when it sends a measure.</p>
</div>
</div>
<div class="section" id="installing-the-environment">
<span id="ambienteinstalacao"></span><h2><a class="toc-backref" href="#id4">Installing the environment</a><a class="headerlink" href="#installing-the-environment" title="Permalink to this headline">¶</a></h2>
<p>The environment are made by two components: the backend using Docker, and the frontend using the FIoT-Client.</p>
<div class="section" id="installing-the-backend-docker">
<h3><a class="toc-backref" href="#id5">Installing the backend: Docker</a><a class="headerlink" href="#installing-the-backend-docker" title="Permalink to this headline">¶</a></h3>
<p>In order to prepare the environment for the execution of this tutorial, first we need to run the GEs that will be necessary for the creations of the IoT Applications using the FIWARE. For that purpose, was planned the architecture presented on this <a class="reference external" href="https://projetos.imd.ufrn.br/FIoT-Client/fiot-client-tutorial/blob/master/extras/arquitetura.jpg">link</a>, composed by the main needed components for the creation of the applications that uses context and IoT manipulation resources on the platform.</p>
<p>In the picture it is possible to identify components resposible for the communication with the devices (IDAS), context Information storage and manipulation (Orion Context Broker), communications with databases for storing measurements (Cygnus) and the databases used for perform that persistence, and for the execution of this tutorial were chosen a <em>MySQL</em> adn a <em>MongoDB</em> Databases, and in addition it was used the FIWARE component responsible for storage historical data, making possible the storage and query of aggregate historical data (STH Comet).</p>
<p>To create the environment composed by all these components, it was used <a class="reference external" href="https://www.docker.com">Docker</a>, that allows from available images of the selected FIWARE components, can be possible to define configuration parameters and the way that communication between theses components will occur.</p>
<p>Note: in case that already exists a configured and available envirnoment that presents the components cited on the image, it is possible to skip the next steps to configure the environment in your setup.</p>
<p>First it is necessary to install Docker in your setup, the tutorial to install Docker can be found on this <a class="reference external" href="https://www.docker.com/get-docker">link</a>.</p>
<p>Also is necessary to install the tool called docker-compose, that will make possible that the environment composed by all the selected components can be easily executed. the tutorial to install docker-compose can be found on this <a class="reference external" href="https://docs.docker.com/compose/install">link</a>.</p>
<p>After you had correctly installed the Docker and the Docker-compose, you are ready to run the environment. For this, you have to acess the directory in which the repository was cloned, there is a file named <a class="reference external" href="https://projetos.imd.ufrn.br/FIoT-Client/fiot-client-tutorial/blob/master/deploy/full/docker-compose.yml">docker-compose.yml</a>, and in your terminal you must execute the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ docker-compose up -d
</pre></div>
</div>
<p>This command will execute all the needed components for the execution of this tutorial.</p>
<p>To check if the environment was configured and it’s running correctly, open your browser and type “localhost:1026/version” and it will be returned a <em>JSON</em> showing the version of the Orion component in execution.</p>
</div>
<div class="section" id="installing-the-frontend-fiot-client-python">
<h3><a class="toc-backref" href="#id6">Installing the frontend : FIoT-Client-Python</a><a class="headerlink" href="#installing-the-frontend-fiot-client-python" title="Permalink to this headline">¶</a></h3>
<div class="section" id="virtual-environment-configuration">
<h4><a class="toc-backref" href="#id7">Virtual Environment Configuration</a><a class="headerlink" href="#virtual-environment-configuration" title="Permalink to this headline">¶</a></h4>
<p>First, it must be created a directory where the environment will be installed, and then acess it</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ mkdir my-directory
$ cd my-directory
</pre></div>
</div>
<p>After the directory is created, it’s created a Python virtual environment</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python -m venv .my-environment
</pre></div>
</div>
<p>To activate it, we use the source command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ source .my-environment/bin/activate
</pre></div>
</div>
<p>Com o ambiente virtual já criado, é feita a instalação do iPython</p>
<p>With the virtual environment created, the installation of iPython is done</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ (.my-environment) pip install ipython
</pre></div>
</div>
</div>
<div class="section" id="installing-the-fiot-client-library">
<h4><a class="toc-backref" href="#id8">Installing the FIoT-Client library</a><a class="headerlink" href="#installing-the-fiot-client-library" title="Permalink to this headline">¶</a></h4>
<p>For install the library, it’s used the command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ (.my-environment) pip install -e git+https://projetos.imd.ufrn.br/FIoT-Client/fiot-client-python.git#egg=fiotclient
</pre></div>
</div>
<p>In order to test if the installation was made correctly, we use the python import command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ (.my-environment) ipython
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">fiotclient</span> <span class="k">import</span> <span class="n">iot</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="installing-the-frontend-gui-web">
<h3><a class="toc-backref" href="#id9">Installing the frontend: GUI Web</a><a class="headerlink" href="#installing-the-frontend-gui-web" title="Permalink to this headline">¶</a></h3>
<p>Under Construction!</p>
</div>
</div>
<div class="section" id="registering-a-device">
<span id="registrardispositivo"></span><h2><a class="toc-backref" href="#id10">Registering a device</a><a class="headerlink" href="#registering-a-device" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-fiot-client">
<h3><a class="toc-backref" href="#id11">Using FIoT-Client</a><a class="headerlink" href="#using-fiot-client" title="Permalink to this headline">¶</a></h3>
<div class="section" id="registering-the-device-on-fiware">
<h4><a class="toc-backref" href="#id12">Registering the device on Fiware</a><a class="headerlink" href="#registering-the-device-on-fiware" title="Permalink to this headline">¶</a></h4>
<div class="section" id="configure-the-configuration-file-config-ini">
<h5>Configure the configuration file (config.ini)<a class="headerlink" href="#configure-the-configuration-file-config-ini" title="Permalink to this headline">¶</a></h5>
<p>To start the register of the device, first we need to create a configuration file, in order to make things simple, there is a pre-programmed file on this <a class="reference external" href="https://projetos.imd.ufrn.br/FIoT-Client/fiot-client-tutorial/blob/master/config.ini">repository</a>, which from him the user can change the values of the addresses of the components of which will be used.</p>
</div>
<div class="section" id="creation-of-the-service-and-the-service-path">
<h5>Creation of the service and the Service Path<a class="headerlink" href="#creation-of-the-service-and-the-service-path" title="Permalink to this headline">¶</a></h5>
<p>After you finish the configuration of the config.ini, the next step is the creation of the Service and the Service Path, using the fiotclient library</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ (.my-environment) ipython
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">fiotclient</span> <span class="k">import</span> <span class="n">iot</span> <span class="c1">#imports the library &#39;fiotclient&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client_iot</span> <span class="o">=</span> <span class="n">iot</span><span class="o">.</span><span class="n">FiwareIotClient</span><span class="p">(</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span> <span class="c1">#configure the components using the config.ini</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client_iot</span><span class="o">.</span><span class="n">create_service</span><span class="p">(</span><span class="s1">&#39;SERVICE_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;/SERVICE_PATH&#39;</span><span class="p">)</span> <span class="c1">#create the service, defining your name and path</span>
</pre></div>
</div>
<p>note: the path of the service must be preceded by a slash ‘/’ and cannot contain certain special characters like the underscore (‘_’).</p>
<p>After the creation of the service, it will be a confirmation message, with a string, that must be maintained together with the name of the service and with the service path, to be used together when a new device is registered. The confirmation message is displayed this way:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;status_code&quot;</span><span class="p">:</span> <span class="mi">201</span><span class="p">,</span><span class="s2">&quot;api_key&quot;</span><span class="p">:</span> <span class="s1">&#39;API_KEY&#39;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="registering-the-device">
<h5>Registering the device<a class="headerlink" href="#registering-the-device" title="Permalink to this headline">¶</a></h5>
<p>For register a new device, first we must set in which service and service path he will be bound, and that is done by using the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client_iot</span><span class="o">.</span><span class="n">set_service</span><span class="p">(</span><span class="s1">&#39;SERVICE_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;/SERVICE_PATH&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using the values stored before. The next step is to assign the API_KEY to device, using the command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client_iot</span><span class="o">.</span><span class="n">set_api_key</span><span class="p">(</span><span class="s1">&#39;API_KEY&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>After you done all the assignments, the next step is to register the device, and this is done by a JSON format file, and some example of devices are available on this <a class="reference external" href="https://projetos.imd.ufrn.br/FIoT-Client/fiot-client-tutorial/tree/master/examples/devices">repository</a>.</p>
<p>It’s recommended that the device files are saved in the same directory as your application is running.</p>
<p>Lastlym to register the device, its used the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client_iot</span><span class="o">.</span><span class="n">register_device</span><span class="p">(</span><span class="s1">&#39;DEVICE_DIRECTORY&#39;</span><span class="p">,</span> <span class="s1">&#39;ID_DEVICE&#39;</span><span class="p">,</span> <span class="s1">&#39;ID_ENTITY&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The arguments of this function are the directory in which it is sabed the device file, the id of the device, and the entity id in which the device is related. All these values are in the device JSON file.</p>
<p>For listing the device that are registered on this Service, it is used the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client_iot</span><span class="o">.</span><span class="n">list_devices</span><span class="p">()</span>
</pre></div>
</div>
<p>After you’re done, the next step is the configuration of the entity that will be related with the device(s) of the application.</p>
</div>
</div>
<div class="section" id="setting-up-storage-registering-databases-in-the-orion">
<h4><a class="toc-backref" href="#id13">Setting up Storage (registering databases in the Orion)</a><a class="headerlink" href="#setting-up-storage-registering-databases-in-the-orion" title="Permalink to this headline">¶</a></h4>
<div class="section" id="entity-s-creation">
<h5>Entity’s creation<a class="headerlink" href="#entity-s-creation" title="Permalink to this headline">¶</a></h5>
<p>For the creation of the entity, first we need to import the methods related to the entity’s API acess module, located in the fiotclient library, after that we must configure the components of the entity using the config.ini file. That steps are done through the following commands:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">fiotclient</span> <span class="k">import</span> <span class="n">context</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client_context</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">FiwareContextClient</span><span class="p">(</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>After done that, now it’s done the assignment of the entity to the desired Service and Service Path, using the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client_context</span><span class="o">.</span><span class="n">set_service</span><span class="p">(</span><span class="s1">&#39;SERVICE_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;/SERVICE_PATH&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to check the informations about this entity, we use the command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client_context</span><span class="o">.</span><span class="n">get_entity_by_id</span><span class="p">(</span><span class="s1">&#39;ID_ENTITY&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="connecting-the-entity-with-cygnus">
<h5>Connecting the entity with Cygnus<a class="headerlink" href="#connecting-the-entity-with-cygnus" title="Permalink to this headline">¶</a></h5>
<p>To connect the entity with Cygnus, the following command is used:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client_context</span><span class="o">.</span><span class="n">subscribe_cygnus</span><span class="p">(</span><span class="s1">&#39;ID_ENTITY&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ATTR_01&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
</pre></div>
</div>
<p>The attributes of the function are the entity’s id that is designated to connect with the Cygnus, and the device attributes.</p>
<p>After this, it’s possible to send the collected data by the devices to a database, that database can be a MySQL, MongoDB, etc.</p>
<p>Lastly, to send and storage the historical data, we use the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client_context</span><span class="o">.</span><span class="n">subscribe_historical_data</span><span class="p">(</span><span class="s1">&#39;ID_ENTITY&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ATTR_01&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="usando-o-web-gui">
<h3><a class="toc-backref" href="#id14">Usando o WEB GUI</a><a class="headerlink" href="#usando-o-web-gui" title="Permalink to this headline">¶</a></h3>
<p>Under Construction!</p>
</div>
</div>
<div class="section" id="programming-a-device">
<span id="programandodispositivo"></span><h2><a class="toc-backref" href="#id15">Programming a device</a><a class="headerlink" href="#programming-a-device" title="Permalink to this headline">¶</a></h2>
<div class="section" id="arduino">
<h3><a class="toc-backref" href="#id16">Arduino</a><a class="headerlink" href="#arduino" title="Permalink to this headline">¶</a></h3>
<p>On this example, it was used a DHT21 AM2301 temperature and humidity sensor, and the file can be found on this <a class="reference external" href="https://projetos.imd.ufrn.br/FIoT-Client/fiot-client-tutorial/blob/master/examples/arduino/FiwareDHT/FiwareDHT.ino">link</a>.</p>
</div>
<div class="section" id="raspberry-pi">
<h3><a class="toc-backref" href="#id17">Raspberry Pi</a><a class="headerlink" href="#raspberry-pi" title="Permalink to this headline">¶</a></h3>
<p>On this example, it was used a DHT22 AM2302 temperature and humidity sensor, and the file can be found on this <a class="reference external" href="https://projetos.imd.ufrn.br/FIoT-Client/fiot-client-tutorial/blob/master/examples/example_DHT2302.py">link</a>.
.. end-programming-RaspberryPi</p>
</div>
</div>
<div class="section" id="visualizing-the-generated-data">
<span id="visualizedata"></span><h2><a class="toc-backref" href="#id18">Visualizing the generated data</a><a class="headerlink" href="#visualizing-the-generated-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-web-gui">
<h3><a class="toc-backref" href="#id19">Using Web Gui</a><a class="headerlink" href="#using-web-gui" title="Permalink to this headline">¶</a></h3>
<p>Under construction!</p>
</div>
<div class="section" id="database-query">
<h3><a class="toc-backref" href="#id20">Database Query</a><a class="headerlink" href="#database-query" title="Permalink to this headline">¶</a></h3>
<p>Under construction!</p>
</div>
<div class="section" id="mysql">
<h3><a class="toc-backref" href="#id21">Mysql</a><a class="headerlink" href="#mysql" title="Permalink to this headline">¶</a></h3>
<p>At the moment that the service is created, it’s created a database with the same name used at the moment of the register, but with lowecase letters. For each registered entity it’s also created in the respective service, a table in the format “SERVICE_PATH” + “_” + “ENTITY_ID” + “_” + “ENTITY_TYPE”.</p>
<p>To acess the database that is being used in the Service its used the command:</p>
<div class="highlight-sql"><div class="highlight"><pre><span></span><span class="n">use</span> <span class="n">NAME_DATABASE</span>
</pre></div>
</div>
<p>Where ‘NAME_DATABASE’ must be replaced by the name of the created database for the service.</p>
<p>To check all registered data in an entity is used the command:</p>
<div class="highlight-sql"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">ENTITY_TABLE</span>

<span class="k">Where</span> <span class="s1">&#39;ENTITY_TABLE&#39;</span> <span class="n">must</span> <span class="n">be</span> <span class="n">replaced</span> <span class="k">by</span> <span class="n">the</span> <span class="n">name</span> <span class="k">of</span> <span class="n">the</span> <span class="n">created</span> <span class="k">table</span> <span class="k">for</span> <span class="n">the</span> <span class="n">entity</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="mongodb">
<h3><a class="toc-backref" href="#id22">MongoDB</a><a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h3>
<p>Under construction!</p>
</div>
<div class="section" id="elk">
<h3><a class="toc-backref" href="#id23">ELK</a><a class="headerlink" href="#elk" title="Permalink to this headline">¶</a></h3>
<p>Under construction!</p>
</div>
<div class="section" id="consulta-ao-orion">
<h3><a class="toc-backref" href="#id24">Consulta ao Orion</a><a class="headerlink" href="#consulta-ao-orion" title="Permalink to this headline">¶</a></h3>
<p>Under construction!</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Lucas Ramon.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>